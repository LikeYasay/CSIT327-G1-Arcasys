{% extends "ArcasysApp/base.html" %}
{% load static %}

{% block title %}Admin Approval{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'ArcasysApp/css/admin_approval.css' %}" />
{% endblock extra_css %}

{% block content %}

<div class="approval-page-header">
  <h1 class="approval-title">Admin Approval</h1>
</div>

<section class="admin-approval-wrapper">
  <div class="applications-section">
    <h2>Pending Staff Applications ({{ applications|length }})</h2>

    <!-- Django messages -->
    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    {% if applications %}
      {% for application in applications %}
      <div class="application-card">
        <div class="app-info">
          <h3>{{ application.full_name }}</h3>
          <p class="app-email">{{ application.email }}</p>
          <p class="app-meta">
            Applied: {{ application.date_applied }}
          </p>
        </div>
        <div class="app-actions">
          <form method="post" action="{% url 'reject_application' application.id %}">
            {% csrf_token %}
            <button type="submit" class="btn reject">Reject</button>
          </form>
          <form method="post" action="{% url 'approve_application' application.id %}">
            {% csrf_token %}
            <button type="submit" class="btn approve">Approve</button>
          </form>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <div class="no-applications">
        <p>No pending staff applications.</p>
      </div>
    {% endif %}

  </div>
</section>

{% endblock content %}